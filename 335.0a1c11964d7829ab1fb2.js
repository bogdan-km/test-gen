(self.webpackChunkmp_data=self.webpackChunkmp_data||[]).push([[335],{9335:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ContextCreatorModule:()=>P});var o=n(8583),c=n(7957),r=n(665),i=n(4148),a=(()=>(function(t){t.common="common",t.products="products"}(a||(a={})),a))(),s=(()=>(function(t){t.common="common",t.loans="loans",t.cards="cards",t.commission="commission",t.accounts="accounts",t.investments="investments"}(s||(s={})),s))(),l=(()=>(function(t){t.common="common",t.consumerLoan="consumer-loan"}(l||(l={})),l))(),p=(()=>(function(t){t.common="common",t.doubleCashBack="double-cashback"}(p||(p={})),p))(),u=n(9765),d=n(9761),m=n(8002),g=n(3190),Z=n(3018),f=n(891),x=n(4316),h=n(7182),v=n(1475),b=n(1797);function y(t,e){if(1&t&&(Z.ynx(0),Z._UZ(1,"psb-select",12),Z.BQk()),2&t){const t=Z.oxw();Z.xp6(1),Z.Q6J("formControlName","productType")("options",t.productsContextType)}}function T(t,e){if(1&t&&(Z.ynx(0),Z._UZ(1,"psb-select",13),Z.BQk()),2&t){const t=Z.oxw().ngIf;Z.xp6(1),Z.Q6J("formControlName","productName")("options",t)}}function _(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,T,2,2,"ng-container",4),Z.BQk()),2&t){const t=e.ngIf;Z.xp6(1),Z.Q6J("ngIf",t.length)}}function C(t,e){if(1&t&&(Z.ynx(0),Z.TgZ(1,"tr"),Z.TgZ(2,"td"),Z._uU(3),Z.qZA(),Z.TgZ(4,"td"),Z._uU(5),Z.qZA(),Z.TgZ(6,"td"),Z._uU(7),Z.qZA(),Z.TgZ(8,"td"),Z._uU(9),Z.qZA(),Z.TgZ(10,"td"),Z._uU(11),Z.qZA(),Z.TgZ(12,"td"),Z._uU(13),Z.qZA(),Z.TgZ(14,"td"),Z._uU(15),Z.qZA(),Z.qZA(),Z.BQk()),2&t){const t=e.$implicit;Z.xp6(3),Z.Oqu(t.id),Z.xp6(2),Z.Oqu(t.type),Z.xp6(2),Z.Oqu(t.productType||"-"),Z.xp6(2),Z.Oqu(t.productName||"-"),Z.xp6(2),Z.Oqu(t.name),Z.xp6(2),Z.Oqu(t.value),Z.xp6(2),Z.Oqu(t.description)}}let q=(()=>{class t{constructor(t){this.contextService=t,this.val=[],this.icon=i,this.contextType=Object.values(a).map(t=>({id:t,label:t,value:t})),this.productsContextType=Object.values(s).map(t=>({id:t,label:t,value:t})),this.loansProductName=Object.values(l).map(t=>({id:t,label:t,value:t})),this.cardsProductName=Object.values(p).map(t=>({id:t,label:t,value:t})),this.form=new r.cw({type:new r.NI,productType:new r.NI,productName:new r.NI,name:new r.NI,value:new r.NI,description:new r.NI}),this.productsName=this.form.valueChanges.pipe((0,d.O)({}),(0,m.U)(t=>(null==t?void 0:t.type)&&(null==t?void 0:t.productType)?t.productType===s.loans?this.loansProductName:t.productType===s.cards?this.cardsProductName:[]:[])),this.isProductVar=this.form.valueChanges.pipe((0,d.O)({}),(0,m.U)(t=>!!(null==t?void 0:t.type)&&t.type===a.products)),this.refresh=new u.xQ,this.contextVars$=this.refresh.pipe((0,d.O)(null),(0,g.w)(()=>this.contextService.getAll())),this.jsonContext=this.contextVars$.pipe((0,m.U)(t=>t.sort((t,e)=>t.id.split(".").length-e.id.split(".").length).reduce((t,e)=>{let n=t;return e.id.split(".").forEach((t,o,c)=>{n[t]||(n[t]={}),console.log(c[o+1]),c[o+1]?n=n[t]:n[t]=e.value}),t},{})))}saveVar(){const t=this.form.getRawValue();(null==t?void 0:t.type)&&this.contextService.createBlock(Object.assign({id:[null==t?void 0:t.type,null==t?void 0:t.productType,null==t?void 0:t.productName,t.name].filter(t=>!!t).join(".")},t)),this.refresh.next(null)}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(f.O))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["context-creator"]],decls:43,vars:20,consts:[[1,"container"],[3,"formGroup"],[1,"item"],["label","\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430",3,"formControlName","options"],[4,"ngIf"],["label","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439",3,"formControlName"],["label","\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439",3,"formControlName"],["label","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",3,"formControlName"],[3,"click"],["cellspacing","0"],[4,"ngFor","ngForOf"],["indent","4",2,"width","1000px",3,"value"],["label","\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442",3,"formControlName","options"],["label","\u0418\u043c\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430",3,"formControlName","options"]],template:function(t,e){1&t&&(Z.TgZ(0,"div",0),Z.TgZ(1,"form",1),Z.TgZ(2,"div",2),Z._UZ(3,"psb-select",3),Z.qZA(),Z.TgZ(4,"div",2),Z.YNc(5,y,2,2,"ng-container",4),Z.ALo(6,"async"),Z.qZA(),Z.TgZ(7,"div",2),Z.YNc(8,_,2,1,"ng-container",4),Z.ALo(9,"async"),Z.qZA(),Z.TgZ(10,"div",2),Z._UZ(11,"psb-text-input",5),Z.qZA(),Z.TgZ(12,"div",2),Z._UZ(13,"psb-text-input",6),Z.qZA(),Z._UZ(14,"psb-textarea",7),Z.qZA(),Z.TgZ(15,"psb-button",8),Z.NdJ("click",function(){return e.saveVar()}),Z._uU(16," add"),Z.qZA(),Z.qZA(),Z.TgZ(17,"table",9),Z.TgZ(18,"thead"),Z.TgZ(19,"tr"),Z.TgZ(20,"th"),Z._uU(21,"id"),Z.qZA(),Z.TgZ(22,"th"),Z._uU(23,"context"),Z.qZA(),Z.TgZ(24,"th"),Z._uU(25,"product context"),Z.qZA(),Z.TgZ(26,"th"),Z._uU(27,"product name"),Z.qZA(),Z.TgZ(28,"th"),Z._uU(29,"key"),Z.qZA(),Z.TgZ(30,"th"),Z._uU(31,"value"),Z.qZA(),Z.TgZ(32,"th"),Z._uU(33,"description"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(34,"tbody"),Z.YNc(35,C,16,7,"ng-container",10),Z.ALo(36,"async"),Z.qZA(),Z.qZA(),Z.TgZ(37,"fieldset"),Z.TgZ(38,"legend"),Z._uU(39,"context-preview"),Z.qZA(),Z._UZ(40,"json-editor",11),Z.ALo(41,"json"),Z.ALo(42,"async"),Z.qZA()),2&t&&(Z.xp6(1),Z.Q6J("formGroup",e.form),Z.xp6(2),Z.Q6J("formControlName","type")("options",e.contextType),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(6,10,e.isProductVar)),Z.xp6(3),Z.Q6J("ngIf",Z.lcZ(9,12,e.productsName)),Z.xp6(3),Z.Q6J("formControlName","name"),Z.xp6(2),Z.Q6J("formControlName","value"),Z.xp6(1),Z.Q6J("formControlName","description"),Z.xp6(21),Z.Q6J("ngForOf",Z.lcZ(36,14,e.contextVars$)),Z.xp6(5),Z.s9C("value",Z.lcZ(41,16,Z.lcZ(42,18,e.jsonContext))))},directives:[r._Y,r.JL,r.sg,x.VN,r.JJ,r.u,o.O5,h.Y,v.v,b.Q,o.sg],pipes:[o.Ov,o.Ts],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;padding-top:60px;align-items:stretch;justify-content:stretch;grid-column-gap:20px;column-gap:20px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:200px}.add-tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:500px}.button-container[_ngcontent-%COMP%]{margin-top:.5rem}.attribute-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:space-between}table[_ngcontent-%COMP%]{border:1px solid gray}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;text-align:left;border-left:1px solid gray;border-bottom:1px solid gray}"]}),t})();var A=n(3500),N=n(1492),O=n(5497),w=n(3143),U=n(8561);let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({imports:[[o.ez,r.UX,r.u5,A.X0,c.Bz.forChild([{path:"",component:q}]),b.J,h.i,v.t,N.FN,O.ZU,w.jM,U.Z,x.cb],c.Bz]}),t})()}}]);