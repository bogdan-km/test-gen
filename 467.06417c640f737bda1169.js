(self.webpackChunkmp_data=self.webpackChunkmp_data||[]).push([[467],{467:(t,e,o)=>{"use strict";o.r(e),o.d(e,{BlockCreatorModule:()=>T});var n=o(8583),r=o(7957),i=o(5353),a=o(665),l=o(4148),s=o(1518),c=o(111),p=o(3018),u=o(5177),m=o(7182),b=o(4316),f=o(1475),g=o(1797),d=o(3143),w=o(1492);function h(t,e){if(1&t&&(p.TgZ(0,"psb-chips-item",15),p._uU(1),p.qZA()),2&t){const t=e.$implicit;p.Q6J("value",t),p.xp6(1),p.hij(" ",t," ")}}function N(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"psb-button",9),p.NdJ("click",function(){return p.CHM(t),p.oxw(2).addAttribute()}),p._UZ(1,"psb-icon",10),p.qZA()}if(2&t){const t=p.oxw(2);p.Q6J("size","l"),p.xp6(1),p.Q6J("path",t.icon)}}function x(t,e){if(1&t&&(p.ynx(0),p.TgZ(1,"form",16),p._UZ(2,"psb-select",17),p._UZ(3,"psb-text-input",18),p._UZ(4,"psb-select",19),p._UZ(5,"psb-select",20),p.YNc(6,N,2,2,"psb-button",21),p.qZA(),p.BQk()),2&t){const t=e.$implicit,o=e.last,n=p.oxw();p.xp6(1),p.Q6J("formGroup",t),p.xp6(1),p.Q6J("formControlName","type")("options",n.attributeTypes),p.xp6(1),p.Q6J("formControlName","name"),p.xp6(1),p.Q6J("formControlName","multiple")("options",n.booleanOpts),p.xp6(1),p.Q6J("formControlName","required")("options",n.booleanOpts),p.xp6(1),p.Q6J("ngIf",o)}}let Z=(()=>{class t{constructor(t){this.blockService=t,this.icon=l,this.tags=[],this.attributeTypes=Object.values(s.C).map(t=>({id:t,label:t,value:t})),this.booleanOpts=[{id:1,label:"\u0414\u0430",value:!0},{id:0,label:"\u041d\u0435\u0442",value:!1}],this.form=new a.cw({name:new a.NI,global:new a.NI,description:new a.NI,newTag:new a.NI,tags:new a.NI,attributes:new a.Oe([this.newAttributeRow()])})}get attributes(){return this.form.get("attributes").controls}addTag(){var t,e,o,n;const r=null===(t=this.form.get("newTag"))||void 0===t?void 0:t.value,i=(null===(e=this.form.get("tags"))||void 0===e?void 0:e.value)||[];console.log(i),r&&(this.tags.push(r),null===(o=this.form.get("tags"))||void 0===o||o.patchValue(i.concat(r))),null===(n=this.form.get("newTag"))||void 0===n||n.patchValue("")}newAttributeRow(){const t=(0,c.w)();return new a.cw({name:new a.NI(`attribute_${t}`),type:new a.NI(s.C.STRING),multiple:new a.NI(!1),required:new a.NI(!0),globalsRef:new a.NI})}addAttribute(){this.form.get("attributes").insert(this.attributes.length,this.newAttributeRow())}saveBlock(){const t=this.form.getRawValue(),e=(0,i._T)(t,["newTag"]);console.log(e),this.blockService.createBlock(e).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(u.g))},t.\u0275cmp=p.Xpm({type:t,selectors:[["block-creator"]],decls:16,vars:11,consts:[[1,"container"],[3,"formGroup"],[1,"attribute-row"],["label","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",3,"formControlName"],["label","\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439",3,"formControlName","options"],["label","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",3,"formControlName"],[1,"add-tag"],["label","\u041d\u043e\u0432\u044b\u0439 \u0442\u0435\u0433",3,"formControlName"],[1,"button-container"],[3,"size","click"],[3,"path"],["psbMultiSelectableItems","","label","\u0422\u044d\u0433\u0438",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"click"],[3,"value"],[1,"attribute-row",3,"formGroup"],["label","\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430",3,"formControlName","options"],["label","\u041d\u0430\u0437\u0430\u0432\u0430\u043d\u0438\u0435 \u0430\u0442\u0442\u0440\u0438\u0431\u0443\u0442\u0430",3,"formControlName"],["label","\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",3,"formControlName","options"],["label","\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439",3,"formControlName","options"],[3,"size","click",4,"ngIf"]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"form",1),p.TgZ(2,"div",2),p._UZ(3,"psb-text-input",3),p._UZ(4,"psb-select",4),p.qZA(),p._UZ(5,"psb-textarea",5),p.TgZ(6,"div",6),p._UZ(7,"psb-text-input",7),p.TgZ(8,"div",8),p.TgZ(9,"psb-button",9),p.NdJ("click",function(){return e.addTag()}),p._UZ(10,"psb-icon",10),p.qZA(),p.qZA(),p.qZA(),p.TgZ(11,"psb-chips",11),p.YNc(12,h,2,2,"psb-chips-item",12),p.qZA(),p.YNc(13,x,7,9,"ng-container",13),p.TgZ(14,"psb-button",14),p.NdJ("click",function(){return e.saveBlock()}),p._uU(15," save"),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(1),p.Q6J("formGroup",e.form),p.xp6(2),p.Q6J("formControlName","name"),p.xp6(1),p.Q6J("formControlName","global")("options",e.booleanOpts),p.xp6(1),p.Q6J("formControlName","description"),p.xp6(2),p.Q6J("formControlName","newTag"),p.xp6(2),p.Q6J("size","l"),p.xp6(1),p.Q6J("path",e.icon),p.xp6(1),p.Q6J("formControlName","tags"),p.xp6(1),p.Q6J("ngForOf",e.tags),p.xp6(1),p.Q6J("ngForOf",e.attributes))},directives:[a._Y,a.JL,a.sg,m.Y,a.JJ,a.u,b.VN,f.v,g.Q,d.PL,w.Wd,w.Br,n.sg,w.Jc,n.O5],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center}.container[_ngcontent-%COMP%]{display:flex;padding-top:60px;width:900px;justify-content:center}.add-tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:500px}.button-container[_ngcontent-%COMP%]{margin-top:.5rem}.attribute-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:space-between}"]}),t})();var v=o(3500),C=o(5497),J=o(8561);let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[n.ez,a.UX,a.u5,v.X0,r.Bz.forChild([{path:"",component:Z}]),g.J,m.i,f.t,w.FN,C.ZU,d.jM,J.Z,b.cb],r.Bz]}),t})()}}]);